{"version":3,"sources":["components/Map/map-style.js","markers/marker.svg","components/Map/Map.js","components/Results/Results.js","components/SelectedResult/SelectedResult.js","components/List/List.js","components/RelatedResults/RelatedResults.js","components/Articles/Articles.js","helpers/requests.js","helpers/utils.js","components/PulseContainer/PulseContainer.js","components/PulseInjector/PulseInjector.js","components/PulseRouter/PulseRouter.js","components/MainView/MainView.js","serviceWorker.js","index.js"],"names":["heatmapLayer","maxzoom","type","paint","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","fill","d","_ref","svgRef","title","props","id","x","y","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","Map","state","viewport","width","window","innerWidth","height","innerHeight","latitude","longitude","zoom","mapStyle","onViewportChange","setState","mapboxApiAccessToken","heatMapData","data","markerCoordinateArray","map","locations","index","lng","lat","className","Component","Results","selectResult","bind","selectWidth","e","value","Badge","variant","selectedResult","Button","size","onClick","undoSelectedResult","onChange","style","fontSize","option","SelectedResult","List","RelatedResults","total","Articles","articles","article","href","slud_and_id","renderArticles","getRelatedArticles","queryParamsAsString","a","fetch","response","ok","json","then","parsedData","console","log","error","status","message","statusText","catch","toString","GeoJSON","require","getHeatMapData","dataToParse","forEach","result","loc","push","location","parse","Point","generateHeatMapData","processPartialDataForHeatMap","filters","filteredData","filterDatasetForHeatMap","filteredResults","filterObj","news_topics","downcasedFilters","ele","toLowerCase","newsTopic","name","includes","publish_date","minDate","maxDate","PulseContainer","backToInjector","onNewsTopicsChange","onNewsTopicsSubmit","onMaxDateChange","onMinDateChange","onDateFilterSubmit","newsTopicsFilter","relatedResults","maxIncomingDate","minIncomingDate","locationNames","origin","pathname","event","preventDefault","split","Set","locationsForSelectedResult","locationAsName","undefined","extractLocationsAsNames","has","matches_with","newsTopics","topic","substring","query","encodeURIComponent","join","results","object","allLocationsAsArray","finalAllLocationsAsArray","filter","el","findRelatedResults","finalRelatedResults","generateQueryParams","createRelatedChunks","Container","fluid","Row","Col","onSubmit","placeholder","showcasedJson","PulseInjector","jsonData","link","loading","submitData","submitLink","handleInjectedDataChange","handleLinkChange","incomingUrl","resp","alert","incomingJson","JSON","stringify","injectData","hostnameAsArray","active","spinner","text","src","disabled","expandLevel","PulseRouter","url","getUrlParam","urlAsArray","injectedData","MainView","path","component","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2b5156e8.chunk.js","sourcesContent":["const MAX_ZOOM_LEVEL = 9;\n\nexport const heatmapLayer = {\n  maxzoom: MAX_ZOOM_LEVEL,\n  type: 'heatmap',\n  paint: {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': ['interpolate', ['linear'], ['get', 'mag'], 0, 0, 6, 1],\n    // Increase the heatmap color weight weight by zoom level\n    // heatmap-intensity is a multiplier on top of heatmap-weight\n    'heatmap-intensity': ['interpolate', ['linear'], ['zoom'], 0, 1, MAX_ZOOM_LEVEL, 3],\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0,\n      'rgba(33,102,172,0)',\n      0.2,\n      'rgb(103,169,207)',\n      0.4,\n      'rgb(209,229,240)',\n      0.6,\n      'rgb(253,219,199)',\n      0.8,\n      'rgb(239,138,98)',\n      0.9,\n      'rgb(255,201,101)'\n    ],\n    // Adjust the heatmap radius by zoom level\n    'heatmap-radius': ['interpolate', ['linear'], ['zoom'], 0, 2, MAX_ZOOM_LEVEL, 20],\n    // Transition from heatmap to circle layer by zoom level\n    'heatmap-opacity': ['interpolate', ['linear'], ['zoom'], 7, 1, 9, 0]\n  }\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  fill: \"#00AEEF\",\n  d: \"M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9   C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8   c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z\"\n}));\n\nvar SvgMarker = function SvgMarker(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 365 560\",\n    enableBackground: \"new 0 0 365 560\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMarker, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/marker.7829f57d.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\n\n// Map tooling\nimport ReactMapGL, { Marker, Source, Layer } from 'react-map-gl';\nimport { heatmapLayer } from './map-style';\n\n// Markers\nimport { ReactComponent as Icon } from './../../markers/marker.svg';\n\n// Styling\nimport './Map.css';\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewport: {\n        width: window.innerWidth / 2,\n        height: window.innerHeight,\n        latitude: 37.7577,\n        longitude: -122.4376,\n        zoom: 1\n      }\n    }\n  }\n\n  render() {\n    return (\n      <ReactMapGL\n        {...this.state.viewport}\n        mapStyle=\"mapbox://styles/mapbox/dark-v10\"\n        onViewportChange={(viewport) => this.setState({viewport})}\n        mapboxApiAccessToken={this.props.mapboxApiAccessToken}\n      >\n        { this.props.heatMapData && (\n          <Source type=\"geojson\" data={this.props.heatMapData}>\n            <Layer {...heatmapLayer} />\n          </Source>\n        ) }\n        { !this.props.heatMapData &&\n          this.props.markerCoordinateArray.map((locations, index) => {\n            return (\n              <Marker\n                key={index}\n                longitude={locations.lng}\n                latitude={locations.lat}>\n                <Icon className='marker-icon'></Icon>\n              </Marker>\n           )\n          })\n        }\n      </ReactMapGL>\n    );\n  }\n}\n\nexport default Map;\n\n\n","// React dependencies\nimport React, { Component } from 'react'\n//Styling\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\n\nclass Results extends Component {\n  constructor(props) {\n    super(props);\n    this.selectResult = this.selectResult.bind(this);\n    this.selectWidth = (window.innerWidth / 3);\n  }\n\n  selectResult(e) {\n    this.props.selectResult(this.props.data[e.target.value]);\n  }\n\n  render() {\n    return (\n      <div>\n        <Badge className='mb-1 mr-3' variant=\"primary\">\n          Select result to see its locations on map, related results and articles\n        </Badge>\n        {\n          this.props.selectedResult &&\n          (\n            <Button variant=\"secondary\" size=\"sm\" onClick={this.props.undoSelectedResult} >\n              Undo selection\n            </Button>\n          )\n        }\n\n        <div className='mt-2'>\n          <select onChange={this.selectResult} style={{width: this.selectWidth + 'px', fontSize: '11px'}}>\n            { this.props.data.map((option, index) =>\n              <option key={index} value={index}>\n                {option.title}\n              </option>\n            )}\n          </select>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Results;\n","// React dependencies\nimport React, { Component } from 'react'\nimport Inspector from 'react-inspector'\nimport Badge from 'react-bootstrap/Badge'\n\nclass SelectedResult extends Component {\n  render() {\n    return (\n      <div>\n        <Badge className='mb-1' variant=\"secondary\">Selected result</Badge>\n        { this.props.selectedResult ?\n            <>\n              <Inspector data={this.props.selectedResult} />\n            </>\n          :\n            <p>No result selected</p>\n        }\n      </div>\n    )\n  }\n}\n\nexport default SelectedResult;\n","// React dependencies\nimport React, { Component } from 'react'\nimport Results from '../Results/Results';\nimport SelectedResult from '../SelectedResult/SelectedResult';\n\nclass List extends Component {\n  render() {\n    return (\n      <div>\n        <div className='mt-3'>\n          <Results\n            undoSelectedResult={this.props.undoSelectedResult}\n            selectResult={this.props.selectResult}\n            selectedResult={this.props.selectedResult}\n            data={this.props.data} />\n        </div>\n        <div className='mt-4'>\n          <SelectedResult\n            selectedResult={this.props.selectedResult}>\n          </SelectedResult>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default List;\n","// React dependencies\nimport React, { Component } from 'react'\nimport Badge from 'react-bootstrap/Badge'\nimport Inspector from \"react-inspector\";\n\nclass RelatedResults extends Component {\n  render() {\n    return (\n      <div>\n        <div className='mt-4 mb-4'>\n          <Badge className='mb-3' variant=\"secondary\">Related results based on locations</Badge>\n          <p>{this.props.data.total} related result{this.props.data.total === 0 ? '' : 's'}</p>\n          <Inspector data={this.props.data.data} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default RelatedResults;\n","// React dependencies\nimport React, { Component } from 'react'\n// Styling\nimport Badge from 'react-bootstrap/Badge'\n\nclass Articles extends Component {\n  renderArticles() {\n    return (\n      <>\n        <p>\n          {this.props.articles.total} related article{this.props.articles.total === 0 ? '' : 's'}\n        </p>\n        <p>First 20 results</p>\n        <ul>\n          {\n            this.props.articles.data.map((article, index) => {\n              return (\n                <li key={index}>\n                  <a target='_blank' href={'https://www.devex.com/news/' + article.slud_and_id}>\n                    {article.title}\n                  </a>\n                </li>\n              )\n            })\n          }\n        </ul>\n      </>\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          <div className='mt-1 mb-5'>\n            <Badge className='mb-3' variant=\"secondary\">Related articles</Badge>\n            {\n              !!Object.keys(this.props.articles).length ?\n                this.renderArticles()\n                :\n                <p>No related articles yet</p>\n            }\n          </div>\n        }\n      </div>\n    )\n  }\n}\n\nexport default Articles;\n","/**\n *\n * @param {string} queryParamsAsString - params for the donors end-point\n *\n * @returns {object|undefined} - If success, returns object, else returns undefined\n */\nconst getRelatedArticles = async (queryParamsAsString) => {\n  try {\n    const response = await fetch(`https://www.devex.com/api/public/search/articles?${queryParamsAsString}`);\n    if (response.ok) {\n      return await response.json();\n    }\n\n    return response\n      .json()\n      .then(parsedData => {\n        console.log(`${parsedData.error || response.status}: ${parsedData.message || response.statusText}`);\n      }).catch(() => {\n        console.log(`${response.status}: ${response.statusText}`);\n      });\n  } catch (error) {\n    console.log(error.toString());\n  }\n};\n\nexport {\n  getRelatedArticles\n};\n","var GeoJSON = require('geojson')\n\nconst generateHeatMapData = data => GeoJSON.parse(data, {Point: ['lat', 'lng']})\n\nconst getHeatMapData = (data) => {\n  const dataToParse = [];\n  data.forEach((result) => {\n    if(!!Object.keys(result.locations).length) {\n      result.locations.forEach((loc) => {\n        if (!!Object.keys(loc).length) {\n          dataToParse.push(loc.location);\n        }\n\n      });\n    }\n  });\n  return  generateHeatMapData(dataToParse);\n}\n\nconst processPartialDataForHeatMap = (data, filters) => {\n  const filteredData = filterDatasetForHeatMap(data, filters);\n  return getHeatMapData(filteredData)\n};\n\n/**\n * @param {array} data - Array containing results\n * @param {array} filters - Array containing filters\n * @param {object} filters[0] - One filter object\n * @returns {object} Filtered data\n */\n\nconst filterDatasetForHeatMap = (data, filters) => {\n  if(!filters.length) {\n    return data;\n  }\n  const filteredResults = [];\n  filters.forEach(filterObj => {\n    const filterName = Object.keys(filterObj)[0]\n    switch(filterName) {\n      case 'news_topics':\n        data.forEach(result => {\n\n          if( !!Object.keys(result.news_topics).length ) {\n            const downcasedFilters = filterObj.news_topics.map(ele => ele.toLowerCase())\n            result.news_topics.forEach(newsTopic => {\n              if (\n                !!newsTopic.name &&\n                downcasedFilters.includes(newsTopic.name.toLowerCase())\n              ) {\n                filteredResults.push(result)\n              }\n            });\n          }\n        })\n        break;\n      case 'publish_date':\n        data.forEach(result => {\n          const { minDate, maxDate } = filterObj.publish_date\n\n          if ( result.publish_date > minDate && result.publish_date < maxDate ) {\n            filteredResults.push(result)\n          }\n        })\n\n        break;\n      default:\n        break;\n    }\n  });\n  return filteredResults\n}\n\nexport {\n  getHeatMapData,\n  filterDatasetForHeatMap,\n  processPartialDataForHeatMap\n}\n\n","// React dependencies\nimport React, { Component } from 'react'\n// Import components\nimport Map from '../Map/Map';\nimport List from '../List/List';\nimport RelatedResults from '../RelatedResults/RelatedResults';\nimport Articles from '../Articles/Articles';\n\n// Styling\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport './PulseContainer.css'\n\n// Helpers\nimport { getRelatedArticles } from '../../helpers/requests'\nimport { getHeatMapData, processPartialDataForHeatMap } from \"../../helpers/utils\";\n\nclass PulseContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.backToInjector = this.backToInjector.bind(this)\n    this.onNewsTopicsChange = this.onNewsTopicsChange.bind(this)\n    this.onNewsTopicsSubmit = this.onNewsTopicsSubmit.bind(this)\n    this.onMaxDateChange = this.onMaxDateChange.bind(this)\n    this.onMinDateChange = this.onMinDateChange.bind(this)\n    this.onDateFilterSubmit = this.onDateFilterSubmit.bind(this)\n    this.state = {\n      markerCoordinateArray: [],\n      selectedResult: null,\n      articles: [],\n      newsTopicsFilter: '',\n      maxDate: '',\n      minDate: '',\n      heatMapData: getHeatMapData(this.props.data),\n      relatedResults: {\n        total: 0,\n        data: []\n      },\n      maxIncomingDate: '',\n      minIncomingDate: '',\n      locationNames: [],\n      mapboxApiAccessToken: \"pk.eyJ1IjoiYmJyYXNzYXJ0IiwiYSI6IjU2MTZjMjRmMjE2MmE4M2Q0OWEwMDVkYTc5YzM3M2Y3In0.V44T7lzZarK4_QwAwoEClw\"\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.data.length) {\n      let maxIncomingDate = this.props.data[0].publish_date\n      let minIncomingDate = this.props.data[0].publish_date\n\n      this.props.data.forEach(result => {\n        if (result.publish_date > maxIncomingDate) {\n          maxIncomingDate = result.publish_date\n        }\n        if(result.publish_date < minIncomingDate) {\n          minIncomingDate = result.publish_date\n        }\n      })\n      this.setState({\n        maxIncomingDate: maxIncomingDate,\n        minIncomingDate: minIncomingDate\n      })\n    }\n  }\n\n  backToInjector() {\n    window.location.href = `${window.location.origin}${window.location.pathname}`\n  }\n\n  onMaxDateChange(event) {\n    this.setState({maxDate: event.target.value});\n  }\n\n  onMinDateChange(event) {\n    this.setState({minDate: event.target.value});\n  }\n\n  onDateFilterSubmit(event) {\n    event.preventDefault();\n\n    const { maxDate, minDate } = this.state;\n\n    const filters = [{\n      publish_date: {\n        maxDate,\n        minDate\n      }\n    }]\n\n    this.setState({\n      markerCoordinateArray: [],\n      selectedResult: null,\n      articles: [],\n      relatedResults: {\n        total: 0,\n        data: []\n      },\n      newsTopicsFilter: '',\n      heatMapData: processPartialDataForHeatMap(this.props.data, filters),\n      locationNames: [],\n    });\n\n  }\n\n  onNewsTopicsChange(event) {\n    this.setState({newsTopicsFilter: event.target.value});\n  }\n\n  onNewsTopicsSubmit(event) {\n    event.preventDefault();\n    const filters = [{ news_topics: this.state.newsTopicsFilter.split('/') }]\n    this.setState({\n      markerCoordinateArray: [],\n      selectedResult: null,\n      articles: [],\n      relatedResults: {\n        total: 0,\n        data: []\n      },\n      maxDate: '',\n      minDate: '',\n      heatMapData: processPartialDataForHeatMap(this.props.data, filters),\n      locationNames: [],\n    });\n\n  }\n\n  extractLocationsAsNames(result) {\n    return new Set(result.locations.map(loc => loc.name));\n  }\n\n  findRelatedResults(selectedResult, locationsForSelectedResult) {\n    if(!selectedResult.locations.length) {\n      return [];\n    }\n    const locationNames = locationsForSelectedResult;\n    const relatedResults = [];\n    locationNames.forEach(locationAsName => {\n      if (locationAsName !== undefined) {\n        this.props.data.forEach(result => {\n          if (selectedResult.title !== result.title && result.locations.length) {\n            if ( this.extractLocationsAsNames(result).has(locationAsName) ) {\n              result.matches_with = locationAsName;\n              relatedResults.push(result);\n            }\n          }\n        });\n      }\n    });\n    return new Set(relatedResults);\n  };\n\n  generateQueryParams(result) {\n    const newsTopics = result.news_topics === undefined ? [] : result.news_topics.map(topic => topic.name.substring(5));\n    const locations = result.locations === undefined ? [] : this.extractLocationsAsNames(result);\n    let query = `page[size]=20&query=${encodeURIComponent([...locations].join('+'))}`;\n    newsTopics.forEach(topic => {\n      query += `&filter[news_topics][]=${encodeURIComponent(topic)}`\n    });\n    return query;\n  }\n\n\n  createRelatedChunks(data) {\n    const results = {};\n    data.forEach(object => {\n      if (results[object.matches_with] === undefined) {\n        results[object.matches_with] = [object];\n      } else {\n        results[object.matches_with].push(object);\n      }\n    });\n    return results;\n  };\n\n  undoSelectedResult() {\n    this.setState({\n      markerCoordinateArray: [],\n      selectedResult: null,\n      newsTopicsFilter: '',\n      articles: [],\n      relatedResults: {\n        total: 0,\n        data: []\n      },\n      heatMapData: getHeatMapData(this.props.data),\n      locationNames: [],\n    });\n  }\n\n  async selectResult(result) {\n    let allLocationsAsArray =\n      result.locations.length > 0 ? new Set(result.locations.map(loc => loc.location)) : [];\n\n    const finalAllLocationsAsArray = [...allLocationsAsArray].filter(el => el != null);\n\n    let locationsForSelectedResult = this.extractLocationsAsNames(result);\n\n    let relatedResults =\n      result.locations.length > 0 ? this.findRelatedResults(result, locationsForSelectedResult) : [];\n\n    const finalRelatedResults = [...relatedResults];\n\n    const articles = await getRelatedArticles(this.generateQueryParams(result));\n\n    this.setState({\n      selectedResult: result,\n      articles,\n      relatedResults: {\n        total: finalRelatedResults.length,\n        data: this.createRelatedChunks(finalRelatedResults)\n      },\n      maxDate: '',\n      minDate: '',\n      newsTopicsFilter: '',\n      heatMapData: null,\n      locationNames: locationsForSelectedResult,\n      markerCoordinateArray: finalAllLocationsAsArray\n    });\n  };\n\n  render() {\n    return (\n      <Container fluid={true}>\n        <Row>\n          <Col>\n            <Button className='mt-4' variant=\"primary\" onClick={this.backToInjector} >\n              Back to injector\n            </Button>\n            <div className='mt-4 search-filters'>\n              <Badge className='mb-2' variant=\"primary\">\n                Heatmap filters\n              </Badge>\n\n              <div>\n                <Badge className='mb-3' variant=\"secondary\">\n                  Filter by publish_date\n                </Badge>\n              </div>\n              <div>\n                <form onSubmit={this.onDateFilterSubmit} style={{ fontSize: '11px'}}>\n                  <label>\n                    Min date in dataset: {this.state.minIncomingDate}\n                    <div>\n                      <input\n                        className='mr-4'\n                        id='minDate'\n                        style={{width: window.innerWidth / 11 + 'px'}}\n                        type='text'\n                        value={this.state.minDate}\n                        placeholder='Enter min date with format YYYY-MM-DD'\n                        onChange={this.onMinDateChange} />\n                    </div>\n                  </label>\n\n                  <label className='mr-2'>\n                    Max date in dataset: {this.state.maxIncomingDate}\n                    <div>\n                      <input\n                        id='maxDate'\n                        style={{width: window.innerWidth / 11 + 'px'}}\n                        type='text'\n                        value={this.state.maxDate}\n                        placeholder='Enter min date with format YYYY-MM-DD'\n                        onChange={this.onMaxDateChange}/>\n                    </div>\n                  </label>\n\n                  <input className='ml-3' type='submit' value='Filter by publish_date'/>\n                </form>\n              </div>\n\n\n              <Badge className='mb-4 mt-4' variant=\"secondary\">\n                Filter by news topics\n              </Badge>\n              <p style={{ fontSize: '11px'}}>\n                Here is the list of news topics.\n              </p>\n              <ul style={{ fontSize: '11px'}}>\n                <li>[GH] Global Health</li>\n                <li>[CE] Careers & Education</li>\n                <li>[FU] Funding</li>\n                <li>[WS] Water & Sanitation</li>\n              </ul>\n              <p style={{ fontSize: '11px'}}>\n                You can combine them using '/'.\n                Example of correct request: \"[GH] Global Health/[WS] Water & Sanitation\".\n                See results on heatmap\n              </p>\n              <div>\n                <form onSubmit={this.onNewsTopicsSubmit} style={{ fontSize: '11px'}}>\n                  <input\n                    style={{width: window.innerWidth / 3 + 'px'}}\n                    type='text'\n                    value={this.state.newsTopicsFilter}\n                    placeholder='Enter full name of one or multipe news topics (separated by /)'\n                    onChange={this.onNewsTopicsChange} />\n                  <div className='mt-3'>\n                    <input type='submit' value='Filter by news_topics' />\n                  </div>\n                </form>\n              </div>\n            </div>\n\n            <List\n              data={this.props.data}\n              undoSelectedResult={this.undoSelectedResult.bind(this)}\n              selectResult={this.selectResult.bind(this)}\n              selectedResult={this.state.selectedResult}>\n            </List>\n            <RelatedResults\n              data={this.state.relatedResults}>\n            </RelatedResults>\n            <Articles\n              articles={this.state.articles}>\n            </Articles>\n          </Col>\n          <Col>\n            <Map\n              heatMapData={this.state.heatMapData}\n              data={this.props.data}\n              markerCoordinateArray={this.state.markerCoordinateArray}\n              mapboxApiAccessToken={this.state.mapboxApiAccessToken}\n              selectedResult={this.state.selectedResult}>\n            </Map>\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n\nexport default PulseContainer;\n","import React, { Component } from 'react';\n// Data imports\n\n// Styling\nimport Container from 'react-bootstrap/Container'\nimport LoadingOverlay from 'react-loading-overlay'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Badge from 'react-bootstrap/Badge'\nimport ObjectInspector from 'react-inspector'\n\nconst showcasedJson = [\n  {\n    \"data_source\" : \"meltwater\",\n    \"url\" : \"https://www.daily-sun.com/post/435110/Bangladesh-WB-sign-100mn-financing-deal-for-safe-water-sanitation-in-municipalities\",\n    \"document_type\" : \"news_article\",\n    \"title\" : \"Bangladesh, WB sign $100mn financing deal for safe water, sanitation in municipalities\",\n    \"hit_sentence\" : \"Bangladesh, WB sign $100mn financing deal for safe water, sanitation in municipalities\",\n    \"publish_date\" : \"2019-10-29\",\n    \"relevant\" : true,\n    \"relevance_confidence\" : 1,\n    \"funders\" : [\n      \"Asian Infrastructure Investment Bank\",\n      \"International Development Association\",\n      \"World Bank Group\"\n    ],\n    \"funders_new\" : [\n      \"NCMM\",\n      \"Osun State Government\",\n      \"World Bank Country Director for Bangladesh\",\n      \"World Bank’s International Development Association\",\n      \"government of Bangladesh\"\n    ],\n    \"companies\" : [\n      \"Asian Infrastructure Investment Bank\",\n      \"Bhutan Mercy Tembon\",\n      \"ERD\",\n      \"National Strategy for Water Supply and Sanitation\",\n      \"WB\",\n      \"World Bank\",\n      \"World Bank 's International Development Association\"\n    ],\n    \"news_topics\" : [\n      {\n        \"confidence\" :0.985,\n        \"name\":\"[WS] Water \\u0026 Sanitation\"\n      } ,\n      {\n        \"confidence\" :0.773,\n        \"name\":\"[IN] Infrastructure\"\n      } ,\n      {\n        \"confidence\":0.75,\n        \"name\":\"[UD] Urban Development\"\n      }\n    ],\n    \"wb_sectors\": [\n      {\n        \"confidence\":0.903,\n        \"name\":\"[WC] Water supply\"\n      },\n      {\n        \"confidence\":0.775,\n        \"name\":\"[WA] Sanitation\"\n      },\n      {\n        \"confidence\":0.634,\n        \"name\":\"[WV] Wastewater Treatment and Disposal\"\n      }\n    ],\n    \"locations\" : [\n      {\n        \"location\": {\n          \"lat\":23.684994,\n          \"lng\":90.356331\n        },\n        \"name\":\"Bangladesh\"\n      }\n    ]\n  }\n]\n\nclass PulseInjector extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      jsonData: [],\n      link: '',\n      loading: false\n    }\n    this.submitData = this.submitData.bind(this)\n    this.submitLink = this.submitLink.bind(this)\n    this.handleInjectedDataChange = this.handleInjectedDataChange.bind(this)\n    this.handleLinkChange = this.handleLinkChange.bind(this)\n  }\n\n  async componentDidMount() {\n    if ( !this.props.incomingUrl ) {\n      return null;\n    }\n\n    this.setState({\n      loading: true\n    })\n\n    fetch(\n      'https://cors-anywhere.herokuapp.com/' + this.props.incomingUrl, {\n      }\n    )\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json()\n        }\n        alert(`Something went wrong: ${resp.status}: ${resp.statusText}`)\n        return false;\n\n      })\n      .then(incomingJson => {\n        this.setState({\n          loading: false,\n          jsonData: JSON.stringify(incomingJson)\n        })\n\n        this.props.injectData(this.state.jsonData)\n      })\n  }\n\n  hasIncorrectUrlParam(hostnameAsArray) {\n    return hostnameAsArray.length !== 2\n  }\n\n  submitData(event) {\n    event.preventDefault()\n    this.props.injectData(this.state.jsonData)\n  }\n\n  submitLink(event) {\n    event.preventDefault()\n\n    window.location.href = `${window.location.origin}${window.location.pathname}?url=${this.state.link}`\n\n  }\n\n  handleLinkChange(e) {\n    this.setState({\n      link: e.target.value\n    })\n  }\n\n  handleInjectedDataChange(e) {\n    this.setState({\n      jsonData: e.target.value\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text='Incoming URL detected. Sit back and relax...'\n        >\n          {\n            this.state.loading && (\n              <img src='https://i.pinimg.com/236x/52/bc/39/52bc3928fd63daa22ebfb555f9ae07dd.jpg' />\n            )\n          }\n        </LoadingOverlay>\n\n        <Container className='mt-4'>\n          <Row>\n            <Col>\n              <div><Badge className='m-4' variant='primary'>Patse #dxy link</Badge></div>\n              <form className='m-4' onSubmit={this.submitLink}>\n              <input\n                type='text'\n                style={{width: window.innerWidth / 4 + 'px'}}\n                placeholder='Paste #dxy link here'\n                value={this.state.link}\n                onChange={this.handleLinkChange} />\n                <div className='mt-3'>\n                  <input type='submit' value='Load results from link' disabled={!this.state.link.length}/>\n                </div>\n              </form>\n            </Col>\n            <Col>\n              <div><Badge className='m-4' variant='primary'>Copy paste JSON data</Badge></div>\n              <form className='m-4' onSubmit={this.submitData}>\n              <textarea\n                style={{width: window.innerWidth / 4 + 'px', height: window.innerWidth / 4 + 'px'}}\n                placeholder='Insert your JSON data here'\n                onChange={this.handleInjectedDataChange} />\n                <div className='mt-3'>\n                  <input\n                    type='submit' value='Import JSON data'\n                    disabled={!this.state.jsonData.length}/>\n                </div>\n              </form>\n            </Col>\n          </Row>\n          <Row className='mt-5'>\n            <p>Example of compatible JSON data</p>\n            <ObjectInspector data={showcasedJson} expandLevel={10}/>\n          </Row>\n        </Container>\n      </>\n    )\n  }\n}\n\nexport default PulseInjector;\n","import React, { Component } from 'react'\n// Components\nimport PulseContainer from '../PulseContainer/PulseContainer'\nimport PulseInjector from '../PulseInjector/PulseInjector'\n\nclass PulseRouter extends Component {\n  constructor(props) {\n    super(props)\n    this.injectData = this.injectData.bind(this)\n    this.state = {\n      data: []\n    }\n    this.url = this.getUrlParam()\n  }\n\n  getUrlParam() {\n    const urlAsArray = window.location.href.split('/?url=');\n    return urlAsArray[1] ? urlAsArray[1] : null\n  }\n\n  injectData(injectedData) {\n    this.setState({\n      data: JSON.parse(injectedData)\n    })\n  }\n\n  render() {\n    return (\n      <>\n        { this.state.data.length ? (<PulseContainer data={this.state.data} />) : (<PulseInjector incomingUrl={this.url} injectData={this.injectData} />) }\n      </>\n    )\n  }\n}\n\nexport default PulseRouter;\n","import React, { Component } from 'react'\n// Components\nimport PulseRouter from '../PulseRouter/PulseRouter'\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nclass MainView extends Component {\n  render() {\n    return (\n      <Router>\n        <Route path='/' component={PulseRouter} />\n      </Router>\n    )\n  }\n}\n\nexport default MainView;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MainView from './components/MainView/MainView';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<MainView />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}